<!DOCTYPE html>
<meta charset="utf-8">
<title>C - ç®¡ç†å‘˜åŠ å¯†å·¥å…·</title>
<style>
  body{max-width:400px;margin:30px auto}
  div,input,button,textarea{width:100%;margin:8px 0;padding:10px}
</style>

<h3>ç®¡ç†å‘˜åŠ å¯†å·¥å…·</h3>

<div>
  <h4>1. ç”Ÿæˆã€ä¼ è¾“å¯†æ–‡ã€‘ï¼ˆBå·¦è¾¹ï¼‰</h4>
  <input id="sIn" placeholder="åŸæ–‡" value="123">
  <button onclick="makeSend()">åŠ å¯†</button>
  <textarea id="sOut" rows="2" readonly></textarea>
</div>

<div>
  <h4>2. ç”Ÿæˆã€å›ä¼ å¯†æ–‡ã€‘ï¼ˆBå³è¾¹ï¼‰</h4>
  <input id="bIn" placeholder="åŸæ–‡" value="567">
  <button onclick="makeBack()">åŠ å¯†</button>
  <textarea id="bOut" rows="2" readonly></textarea>
</div>

<script>
// ==============================================
// ğŸ”’ ã€ç®¡ç†å‘˜ä¸“ç”¨ã€‘åªèƒ½åœ¨è¿™é‡Œæ”¹å¯†é’¥ï¼ˆç•Œé¢çœ‹ä¸è§ï¼‰
// ==============================================
const SEND_KEY = "123456789.abc.bcd";
const BACK_KEY = "987654321.cbd.abc";

// ==============================================
// åŠ å¯†ç®—æ³•ï¼ˆå’Œ A å®Œå…¨ä¸€è‡´ï¼‰
// ==============================================
function xorEncrypt(str, key) {
  let r = "";
  for (let i=0; i<str.length; i++) {
    const kc = key.charCodeAt(i % key.length);
    const sc = str.charCodeAt(i);
    r += String.fromCharCode(sc ^ kc);
  }
  return btoa(encodeURIComponent(r));
}

function makeSend() {
  const t = document.getElementById("sIn").value;
  document.getElementById("sOut").value = xorEncrypt(t, SEND_KEY);
}

function makeBack() {
  const t = document.getElementById("bIn").value;
  document.getElementById("bOut").value = xorEncrypt(t, BACK_KEY);
}
</script>
