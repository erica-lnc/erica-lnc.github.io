<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D回忆时光机（照片+视频完整版）</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  background: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow: hidden;
  perspective: 1200px;
  font-family: system-ui, sans-serif;
  color: #fff;
}

#box {
  position: relative;
  width: 260px;
  height: 260px;
  transform-style: preserve-3d;
  transition: transform 2.8s ease-out;
}

.media {
  position: absolute;
  width: 180px;
  height: 180px;
  object-fit: contain;
  border-radius: 10px;
  border: 2px solid #fff;
  box-shadow: 0 0 15px rgba(255,255,255,0.3);
  backface-visibility: hidden;
}

#player {
  position: fixed;
  width: 80%;
  height: 50%;
  max-width: 450px;
  max-height: 350px;
  object-fit: contain;
  background: #000;
  border: 3px solid #fff;
  border-radius: 12px;
  box-shadow: 0 0 30px rgba(255,255,255,0.3);
  opacity: 0;
  transform: scale(0.2);
  transition: all 1s;
  z-index: 10;
}
#player.show {
  opacity: 1;
  transform: scale(1);
}

.buttons {
  position: fixed;
  bottom: 50px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 20;
}

button {
  padding: 12px 26px;
  background: #fff;
  color: #111;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 50px;
  display: none;
}
button.show {
  display: block;
}
</style>
</head>
<body>

<div id="box"></div>
<img id="player">
<video id="player" controls></video>

<div class="buttons">
  <button id="again">再来一次</button>
  <button id="memoryVideo">回忆影片</button>
</div>

<script>
// ==============================
// 这里放你的照片 & 视频网址
// ==============================
const items = [
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/1745764370201.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/2c2bd9de20f66c6bf72c1d7d13952fce.JPG' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_0138.JPG' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_0140.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20220224_135806.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20220307_170937 (1).jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20221015_191111.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20221028_150339.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20221210_161510.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20230801_200205.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20230806_151508_031702.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112525.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/ph/IMG_20260219_112549.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112600.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112610.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112618.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112626.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112635.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112644.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112653.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112703.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112713.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112742.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112753.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112800.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112807.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112814.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112822.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/IMG_20260219_112831.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-08-54-074_com.google.android.apps.photos.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-08-54-074_com.google.android.apps.photos_1745829273098.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-09-25-640_com.google.android.apps.photos.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-09-38-211_com.google.android.apps.photos.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-09-52-207_com.google.android.apps.photos.jpg' },
  { type: 'image', url: 'https://erica-lnc.github.io/Ph/Screenshot_2022-12-10-16-11-21-255_com.google.android.apps.photos.jpg' },
  

];

// 完整回忆影片（点“回忆影片”播放这个）
const fullMemoryVideo = 'mp4';

const box = document.getElementById('box');
const againBtn = document.getElementById('again');
const memoryBtn = document.getElementById('memoryVideo');

function create3D() {
  box.innerHTML = '';
  const total = items.length;
  items.forEach((item, i) => {
    const el = document.createElement(item.type === 'video' ? 'video' : 'img');
    el.src = item.url;
    el.className = 'media';
    if (item.type === 'video') el.muted = true;
    const deg = (360 / total) * i;
    el.style.transform = `rotateY(${deg}deg) translateZ(300px)`;
    box.appendChild(el);
  });
}

function playSelected(item) {
  const player = document.getElementById('player');
  player.className = '';
  player.classList.remove('show');
  player.pause && player.pause();

  setTimeout(() => {
    if (item.type === 'image') {
      player.tagName = 'IMG';
      player.src = item.url;
      player.onload = () => {
        player.classList.add('show');
        showButtons(5000);
      };
    } else {
      player.tagName = 'VIDEO';
      player.src = item.url;
      player.muted = false;
      player.playsInline = true;
      player.autoplay = true;
      player.classList.add('show');
      player.onended = () => {
        showButtons(1000);
      };
    }
  }, 300);
}

function showButtons(delay) {
  setTimeout(() => {
    againBtn.classList.add('show');
    memoryBtn.classList.add('show');
  }, delay);
}

function start() {
  againBtn.classList.remove('show');
  memoryBtn.classList.remove('show');
  box.style.transform = 'rotateY(0deg)';

  setTimeout(() => {
    const rot = 720 + Math.random() * 360;
    box.style.transform = `rotateY(${rot}deg)`;

    setTimeout(() => {
      const selected = items[Math.floor(Math.random() * items.length)];
      playSelected(selected);
    }, 2800);
  }, 300);
}

againBtn.onclick = start;
memoryBtn.onclick = () => {
  const p = document.getElementById('player');
  p.src = fullMemoryVideo;
  p.muted = false;
  p.autoplay = true;
  p.playsInline = true;
  p.classList.add('show');
};

window.onload = () => {
  create3D();
  start();
};
</script>
</body>
</html>
