<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1â†”2 ç‹‚åˆ· 2000äº¿æ¬¡ NFC</title>
<style>
body{
  background:#000; color:#fff;
  text-align:center; padding:40px 20px;
  font-family:Arial,sans-serif;
}
#btn{
  padding:25px 40px; font-size:24px;
  background:#f00; color:#fff;
  border:none; border-radius:14px;
}
#log{
  margin-top:30px; font-size:20px;
  min-height:60px;
}
</style>
</head>
<body>

<h1>âš¡ 1 â†” 2 ç‹‚åˆ· 2000 äº¿æ¬¡</h1>
<button id="btn">å¼€å§‹ç‹‚åˆ· NFC</button>
<div id="log">å‡†å¤‡å°±ç»ª</div>

<script>
const btn = document.getElementById('btn');
const log = document.getElementById('log');

const MAX = 200000000000; // 2000 äº¿æ¬¡
let count = 0;

btn.onclick = async () => {
  btn.disabled = true;
  btn.textContent = 'ðŸ”¥ ç‹‚åˆ·ä¸­...';
  log.textContent = 'è¯·è´´ä¸Š NFC æ ‡ç­¾';

  try {
    const ndef = new NDEFReader();
    await ndef.scan();

    ndef.onreading = async () => {
      while (count < MAX) {
        try {
          // ç¬¬ä¸€æ¬¡ï¼šå†™ 1
          await ndef.write({
            records: [{ recordType: "text", data: "1" }]
          });
          count++;
          log.textContent(`ç¬¬ ${count} æ¬¡ï¼šå†™å…¥ 1`);

          // ç¬¬äºŒæ¬¡ï¼šå†™ 2
          await ndef.write({
            records: [{ recordType: "text", data: "2" }]
          });
          count++;
          log.textContent(`ç¬¬ ${count} æ¬¡ï¼šå†™å…¥ 2`);
        } catch (e) {
          log.textContent('ðŸ’¥ æ ‡ç­¾å´©æºƒï¼ä»»åŠ¡ç»“æŸ');
          btn.textContent = 'âœ… å·²æŠ¥åºŸ';
          return;
        }
      }
      log.textContent('âœ… 2000äº¿æ¬¡åˆ·å®Œï¼');
      btn.textContent = 'å®Œæˆ';
    };

  } catch (e) {
    log.textContent('âŒ ä¸æ”¯æŒNFCæˆ–æœªæŽˆæƒ');
    btn.disabled = false;
    btn.textContent = 'å¼€å§‹ç‹‚åˆ· NFC';
  }
};
</script>
</body>
</html>
