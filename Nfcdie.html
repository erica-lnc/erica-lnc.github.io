<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width=device-width, initial-scale=1.0">
<title>æ— é™æš´åŠ›æŠ¥åºŸ NFC</title>
<style>
body{background:#000;color:#fff;text-align:center;padding:60px 20px;font-family:Arial;}
#btn{padding:30px 50px;font-size:26px;background:#f00;color:#fff;border:none;border-radius:15px;}
#log{margin-top:40px;font-size:22px;min-height:70px;}
</style>
</head>
<body>

<h1>ğŸ’¥ æ— é™æš´åŠ›æŠ¥åºŸ NFC</h1>
<button id="btn">å¼€å§‹æ— é™æš´åŠ›å†™å…¥</button>
<div id="log">å‡†å¤‡å°±ç»ª</div>

<script>
const btn = document.getElementById('btn');
const log = document.getElementById('log');

// è¶…å¤§åƒåœ¾æ•°æ®
const junk = '00000000000000000000000000000000000000000000000000'
           + '00000000000000000000000000000000000000000000000000'
           + 'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF';

let count = 0;

btn.onclick = async () => {
  btn.disabled = true;
  btn.textContent = 'ğŸ”¥ æš´åŠ›å†™å…¥ä¸­...';
  log.textContent = 'è¯·è´´ä¸Š NFC æ ‡ç­¾ï¼';

  try {
    const ndef = new NDEFReader();
    await ndef.scan();

    ndef.onreading = async () => {
      // æ— é™å¾ªç¯ï¼Œå†™åˆ°æ­»ä¸ºæ­¢
      while (true) {
        try {
          await ndef.write({
            records: [{ recordType: "text", data: junk }]
          });
          count++;
          log.textContent(`âœ… ç¬¬ ${count} æ¬¡å†™å…¥`);
        } catch (e) {
          log.textContent('ğŸ’¥ æ ‡ç­¾å·²æŠ¥åºŸ / å¡æ­» / æ‹’ç»å†™å…¥');
          btn.textContent = 'âœ… å·²æŠ¥åºŸ';
          return;
        }
      }
    };
  } catch (e) {
    log.textContent('âŒ ä¸æ”¯æŒ NFC æˆ–æœªæˆæƒ');
    btn.disabled = false;
    btn.textContent = 'å¼€å§‹æ— é™æš´åŠ›å†™å…¥';
  }
};
</script>
</body>
</html>
