<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2000äº¿æ¬¡ å†™äº¿åˆ äº¿ ç‹‚åˆ·NFC</title>
<style>
body{
  background:#000; color:#fff;
  text-align:center; padding:40px 20px;
  font-family:Arial, sans-serif;
}
#btn{
  padding:25px 40px; font-size:24px;
  background:#f00; color:#fff;
  border:none; border-radius:14px;
}
#log{
  margin-top:30px; font-size:20px;
  min-height:60px;
}
</style>
</head>
<body>

<h1>âš¡ 2000 äº¿æ¬¡ å†™äº¿+åˆ äº¿ ç‹‚åˆ·</h1>
<button id="btn">å¼€å§‹ç‹‚åˆ· NFC æ ‡ç­¾</button>
<div id="log">å‡†å¤‡å°±ç»ª</div>

<script>
const btn = document.getElementById('btn');
const log = document.getElementById('log');

// 2000 äº¿æ¬¡
const MAX = 200000000000;
let count = 0;

btn.onclick = async () => {
  btn.disabled = true;
  btn.textContent = 'ðŸ”¥ ç‹‚åˆ·ä¸­...';
  log.textContent = 'è¯·è´´ä¸Š NFC æ ‡ç­¾';

  try {
    const ndef = new NDEFReader();
    await ndef.scan();

    ndef.onreading = async () => {
      while (count < MAX) {
        try {
          // 1. å†™å…¥ã€Œäº¿ã€
          await ndef.write({
            records: [{ recordType: "text", data: "äº¿" }]
          });
          count++;
          log.textContent(`âœ… ç¬¬ ${count} æ¬¡ï¼šå†™å…¥ã€Œäº¿ã€`);

          // 2. åˆ æŽ‰ï¼ˆå†™å…¥ç©ºå†…å®¹ï¼‰
          await ndef.write({
            records: [{ recordType: "text", data: "" }]
          });
          log.textContent(`ðŸ—‘ï¸ ç¬¬ ${count} æ¬¡ï¼šå·²åˆ é™¤`);
        } catch (e) {
          log.textContent('ðŸ’¥ æ ‡ç­¾å·²ç»æ‰›ä¸ä½äº†ï¼');
          btn.textContent = 'âœ… ç»“æŸ';
          return;
        }
      }
      log.textContent('âœ… 2000 äº¿æ¬¡å®Œæˆï¼');
      btn.textContent = 'å®Œæˆ';
    };

  } catch (e) {
    log.textContent('âŒ ä¸æ”¯æŒNFCæˆ–æœªæŽˆæƒ');
    btn.disabled = false;
    btn.textContent = 'å¼€å§‹ç‹‚åˆ· NFC æ ‡ç­¾';
  }
};
</script>
</body>
</html>
